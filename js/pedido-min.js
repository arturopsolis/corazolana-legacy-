function formatMoney(e){if("number"==typeof e)return"$"+e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function unformatMoney(e){let t=/^\$/,o=t.test(e);if(o){let o=e.replace(t,"");return newNum=parseFloat(o),newNum}return o}function igualarHiddenInputs(){let e=document.querySelector("textarea#input-tabla"),t=pedido.tablaSTR();e.value=t}function setCookiePedido(){let e=JSON.stringify(pedido.articulos);Cookies.set("pedido",e,{expires:3,path:""})}function refrescarTabla(){let e=document.getElementById("tabla-pedido-container");e.innerHTML="",e.append(pedido.tablaHTML())}function refrescarTotal(){let e=document.getElementById("costo-total"),t=document.getElementById("total"),o=pedido.formatMoney(pedido.total());e.textContent=`Total: ${o} MXN`,t.value=o}function notificarUnidades(){let e=document.getElementById("unidades-totales");e.textContent=pedido.cuantasUnidades(),e.style.display="block",e.style.animationName="salta",setTimeout((function(){e.style.animationName="none"}),1e3)}function notificacionProducto(){let e=document.querySelector("#nombre-producto").textContent,t=document.querySelector("select#unidades").value,o=document.getElementById("notificacion"),n;o.textContent=`Se agregÃ³ ${t} ${e}`,null!==document.querySelector("#color-seleccionado")&&(n=document.querySelector("#color-seleccionado").textContent,void 0!==n&&(o.textContent+=" "+n))}function barraPedido(){pedido.cuantasUnidades()>0&&(document.getElementById("pedido-container").classList.remove("oculto"),document.getElementById("btn-ver-pedido").classList.remove("oculto"))}function articuloExistente(e,t){if(0!==pedido.articulos.length)for(let o=0;o<pedido.articulos.length;o++)if(e===pedido.articulos[o].nombreProducto&&t===pedido.articulos[o].color)return o;return-1}function agregarArticulo(){let e=document.getElementById("nombre-producto").textContent,t="",o=parseInt(document.querySelector("select#unidades").value),n=unformatMoney(document.querySelector("p#precio").innerHTML),r=o*n,i=document.querySelector("#imagen-producto img").src;document.getElementById("color-seleccionado")&&(t=document.getElementById("color-seleccionado").textContent);let d=articuloExistente(e,t);if(-1==d){let d={nombreProducto:e,color:t,unidades:o,precio:r,precioUnitario:n,precio:r,fotoSRC:i};pedido.articulos.push(d)}else pedido.articulos[d].precio+=r,pedido.articulos[d].unidades+=o;notificacionProducto(),refrescarTabla(),refrescarTotal(),notificarUnidades(),barraPedido(),igualarHiddenInputs(),setCookiePedido()}const pedido={articulos:[],cuantasUnidades(){let e=0;for(let t=0;t<this.articulos.length;t++)e+=this.articulos[t].unidades;return e},borrarRegistro(e){this.articulos.splice(e,1),refrescarTabla(),refrescarTotal(),notificarUnidades(),igualarHiddenInputs()},total(){let e;return this.articulos.reduce((function(e,t){return e+t.precio}),0)},totalMasIVA(){return Math.round(1.16*this.costoTotal())},tablaHTML(){let e=this.articulos,t="",o=document.createElement("div");o.className="pedido",o.setAttribute("id","pedido");for(let o=0;o<e.length;o++)t+=`<div class="item-producto">\n                            <div class="row">\n                                <div class="col-3">\n                                    <img src="${e[o].fotoSRC}" class="img-producto">\n                                </div>\n                                <div class="col-6" style="padding-left:0">\n                                    <h3>${e[o].nombreProducto}</h3>\n                                    <h4>${e[o].color}</h4>\n                                    <p>${formatMoney(e[o].precio)}</p>\n                                </div>\n                                <div class="col-2 no-padding">\n                                    <p class="text-center">${e[o].unidades}</p>\n                                </div>\n                                <div class="col-1 no-padding">\n                                    <button class="btn-delete-row" onclick="pedido.borrarRegistro(${o})"><i class="far fa-trash-alt"></i></button></td>\n                                </div>\n                            </div>\n                        </div>`;return o.innerHTML=t,o},tablaSTR(){let e=this.articulos,t="";t+='<table cellpadding="10" border="1" style="margin:30px auto;text-align: left; border: 1px solid #f1f1f1;">\n                        <tr>\n                            <th style="text-align:center">Producto</th>\n                            <th style="text-align:center">Color</th>\n                            <th style="text-align:center">Unidades</th>\n                            <th style="text-align:center">Precio</th>\n                        </tr>';for(let o=0;o<e.length;o++)t+=`<tr>\n                            <td style="text-align:left">${e[o].nombreProducto}</td>\n                            <td style="text-align:left">${e[o].color}</td>\n                            <td style="text-align:center">${e[o].unidades}</td>\n                            <td style="text-align:left">${formatMoney(e[o].precio)}</td>\n                        </tr>`;return t+="</table>",t},formatMoney(e){if("number"==typeof e)return"$"+e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},unformatMoney(e){let t=/^\$/,o=t.test(e);if(o){let o=e.replace(t,"");return newNum=parseFloat(o),newNum}return o},date:new Date};let btnVerCerrar=document.querySelectorAll(".btn-ver-cerrar"),pedidoContainer=document.getElementById("pedido-container"),btnVerPedido=document.getElementById("btn-ver-pedido");btnVerCerrar.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),pedidoContainer.classList.toggle("active"),btnVerPedido.classList.toggle("active")}))}));